# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```


## Модель
Модель представлена классом AppState
Свойства:
    catlog: ICatalog; //массив товаров
    customer: TCustomer; //покупатель
    busket: IBusket; //корзина
    api: ILarekApi; //экземпляр API
    events: IEvents; //экземпляр брокера событий 
    orderLog: string[]; //лог сделанных заказов
    step: TCustomerStep; //на каком шаге находится пользователь в оформлении заказа
    curentProduct: TProduct; //текущий выбранный товар
    
Методы:
    //заполнение данных покуателя
    setPayadress(method: TPaymentMethod, address: string): boolean; 
    setPhoneemail(phone: string, email: string): boolean;
    makeOrder(): Promise<string>; //Попытка сделать заказ    


## Представление
В представлении создаются объекты для всех элементов, подлежащих изменениям или реагирующих на события:
0. Контейнер каталога
1. Карточка товара (3 режима отображения - в каталоге, в модальном окне, в корзине)
2. Счетчик корзины
3. Модальное окно
4. Контейнер корзины
5. Строка товара в корзине с количеством, кнопками и суммой
6. Форма оформления заказа
7. Форма ввода контактов
8. Сообщение об успешном заказе

## Презентер
Презентер обрабатывает события, поступившие от модели или представления

От модели:
0. Загружен каталог
    Представление выводит на экран карточки товаров
1. Заказ сделан
    В модальном окне отображается сообщение "Заказ оформлен"
    Меняется шаг в модели
    Очищается корзина
    Обнуляется счетчик корзины в представлении

От представления:
0. Выбран товар
    Открывается модальное окно
    В модальном окне отображается карточка товара
    В модели выбирается текущий товар
1. Товар добавлен в корзину
    Закрывается модальное окно
    Вызывается метод добавления товара в корзину в модели
2. Открытие корзины
    Открывается модальное окно
    В модальном окне отображается список товаров в корзине
    В модели выбирается пользовательский шаг "Корзина"
3. Увеличение или уменьшение количества товара в корзине
    Вызывается соответствующий метод в модели
    Изменяется отображение количества и цены товара
    Если модель возвращает информацию о снижение количества до 0, удаляется элемент отображения товара из корзины
4. Нажата кнопка оформить заказ
    В модальном окне скрывается корзина и отображается форма оформления заказа
    Меняется шаг в модели
5. Нажата кнопка далее в окне оформления заказа
    Скрывается форма оформления заказа и отображается форма ввода контактов
    Информация об адресе и способе оплаты записывается в модель
    Меняется шаг в модели
6. Нажата кнопка Оплатить
    Меняется шаг в модели
    Вызывается метод оформления заказа в модели

 




